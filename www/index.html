<html>
  <head>
    <script type="text/javascript" src="js/cbimain.js"></script>
    <script type="text/javascript" src="js/cbihelper.js"></script>
    <script type="text/javascript" src="js/cbiparser.js"></script>
  </head>
  <body style="background-color: lightsteelblue">
    <div style="text-align: center">
      <div>
        Web Interface for interacting with the <br>
        <i><script type="text/javascript">document.write(cbiGetVersion(true));</script></i><br>
        by <b>Krevo_ </b><br><br>
        <img id="casioFont" style="display: none" src="data:image/gif;base64,
R0lGODlhAAYIAKEBAAQEBP///////////yH5BAEKAAIALAAAAAAABggAAAL+DH6GoNi5WHxy0Tuz
1Y7DDXbhJ5bkWZkpegXu6zKvNBuwDN95stf5DwwKd7zYjTfxJRUxS2NWHOqCuCbOYbVekUWPDHvN
QmnGqq2s5HbV2++mFo7D4U4s0H6mmqdSo3Dv1yOY19RneIiYqAjlw/Q3suIm2SaGMcK4iLiHV0Xz
pRVpqdIC1kj1AHpX18biJdoKaej6RLo2Cch3hGezlKkZ6xq8SjeWKjx6DIvsRLTsrAwdmiwNXP1M
ff2KHa2aPa2dR8Y7h1Y+bi6eHr4uh85Ofh6v3i7/7k4/D49LmF8sZwZwUKCBvuo5WmcKyQ9c/c5E
iULoTqOGFB0SDOiOoMX+jYwg6LNXL0wgfCDVTel0ytzCIftWngLUMmWugjRj0pR58c/HOJ8U+iTz
sNMnnDIxzgyIshxJnkxE9vTzgaUShIOAjixJVeo9UzozWh24KatElxFN3uyzdKdapYWmYk27NW7I
tXPlVoRbN+9dunvtvuX79+pVvH31BjZM+HDhxYobJ378ESfQOmPFla1ssCZUkVV1TNIINXLQXL2G
jutAd7DAy4JPivXkiDE9PonztgZtep/QnpQKSSKNeg0Rt+Gs2tIyhjdyWo+flmFmFKxfpryUY6pw
JHv1sC1Yvzrag/M/j57IE78MW/hUpgqTq57uHDHXoghLbRb6HiVMOrD+b9v5X1xvkE1HjmnFOAbY
gIado6BsCT5IYITySehgRp01iCCFGU7IYYUdbughY0SFp510WlXFBkzMkNVfRKwZ+NxDuriHliau
lWdCTjF+tl133Mno2Wkh2bddb63lY5aOGnGnmU+CeHTfYLmxyM8c2H140H7vZdaFiQfpgYZsl3z5
ExvLZUkZZ6SN5d1CSVXXFDEGlYLac2yJ4ZRRQ2HYlkW1uTmlmhOBVpdTbCKVBllbRodhbV1ipmGj
EFIlaaSThghippUi9oalnn64KaahanopqRYq2gxEBra42khA9imLdoLu1wuXg56EX0IrvpnCYVsq
aZahmeXXUJjx0Db+6D9+rjmTkot0eiw70OkSLIt6CnnPf0RWQilbSZK52rUc3WXdlW2ZSyZATE7m
DZ2tdtVjekIKG1pgatJrYqCAXaTvqS5iRSUtzPFXpHhcVXugwNoKWOqfUjwKasOlMijxp6JWHLHF
pv47ascYX6yxxyF/LJaNDN9JlLLOunnwrV4mRdKRtEX3b7MtRwjjtQbXu+eFqW3Us8yhuRGn0DZX
mcmmNiM8LtLz/uzaoQw615+qzdKsW4Llxlb0aJh8LZ1NAuUa7YlIwjnnnXDde147/S5o9aKvSS3o
bfBaxq/LyHoJHrJvg1zzwySLnHHhgB++MeKjykz4PNZw803kj2/ZQzk4kreLOTcjBnl00fS9O99w
jwi4ip7H6brFiZ0zOfCOBy4MJbX1qSdtnXO2l51JnMzoMtNJ7MI7oBC5B50tv6EumLZRu6s77i7t
ZnpWX0WVHNmpjw45b6fDjm5Qw28GDpsJJXK55vZByUXCHFTfZ/mTpZsNt+zXmgpa0M7MiopgnC6w
q6RnXjn6yWJyliOg+7qRPQAWUIEHbKABH6hA4QUQgiw4iwUviMEManCDHOygBz8IwhCKcIQkLKEJ
T4jCFKpwhSxsoQtfCMMYynCGNKyhDW+IQxMWAAA7" />
        <canvas id="canvas1" width="508" height="252"></canvas>
        <canvas id="canvas2" width="508" height="252"></canvas>
       <br><br>
        <textarea id="srcCode" cols="80" rows="15">
        </textarea> <br>
 (list of <a href="availablefunctions.html">currently implemented functions</a>)<br><br>
        <textarea style="display: none" id="srcCode0">
""
""
""
"    Hello World !"
        </textarea>
        <textarea style="display: none" id="srcCode1">
5->A
Lbl 1
A
Dsz A
Goto 1
"      Ignition !"
        </textarea>
        <textarea style="display: none" id="srcCode2">
Range 1,10,0,10,1,0
Mcl:1->A:1->B
Lbl 1
Plot 1,A:Plot B,10:Line
Isz A:Isz B:A<>11=>Goto 1
Mcl:1->A:10->B
Lbl 2
Plot A,10:Plot 10,B:Line
Isz A:Dsz B:Goto 2
Mcl:10->A:10->B
Lbl 3
Plot A,1:Plot 10,B:Line
Dsz A:Dsz B:Goto 3
Mcl:10->A:1->B
Lbl 4
Plot A,1:Plot 1,B:Line
Isz B:Dsz A:Goto 4
Cls:Mcl:Goto 1
        </textarea>
        <textarea style="display: none" id="srcCode3">
-500->A
Lbl 1
Range 1,127,0,1,63,0
Plot Ran#*127, Ran#*63
Isz A
Goto 1        
        </textarea>
        <textarea style="display: none" id="srcCode4">
Range 1,127,0,63,1,0
0->B
Lbl 1
0->A
Lbl 2
Int (Ran#*2)->C
Plot A*5,(B+C)*5
Plot (A+1)*5,(B+1-C)*5
Line
Isz A
A<26=>Goto 2
Isz B
B<14=>Goto 1       
       </textarea>
        <textarea style="display: none" id="srcCode5">
50->A
Lbl 1
Ran#
Dsz A
Goto 1
       </textarea>
        <textarea style="display: none" id="srcCode6">
"   CALCUL IMC"
"Poids (kg) "?->P
"Taille (m) "?->T
Int(P/(T*T)*100)/100
       </textarea>
        <textarea style="display: none" id="srcCode7">
# ---------------------
# CALENDRIER UNIVERSEL
# ---------------------

Prog 1

@@ Prog 1 ( )

Range 1,127,0,1,63,0 
Plot 76,8
Plot 76,55:Line
7->E
Lbl 4
Plot 10*E-4,8
Plot 10*E-4,55:Line
Plot 6,8*E-1
Plot 76,8*E-1:Line
Dsz E
Goto 4
7->E:0->C
Lbl 3
Isz C
C+.15->D:Prog F
Prog 7
C<7=>Goto 3
"CALENDRIER UNIVERSEL"
Lbl 1
"ANNEE "?->Y
"MOIS "?->N
1->D
N<>Int (N)=>Goto 1
Y<>Int (Y)=>Goto 1
D<>Int (D)=>Goto 1
Int((14-N)/12)->C
Y-C->A
N+12*C-2->M
D+A+Int(A/4)-Int(A/100)+Int(A/400)+Int((31*M)/12)->J
J-Int(J/7)*7->P
P=0=>7->P
30->J
(N/2)<>Int (N/2)=>N<=7=>31->J
(N/2)=Int (N/2)=>N>=8=>31->J     
N=2=>28->J
N=2=>Frac(Y/4)=0=>Frac(Y/100)>0=>29->J
N=2=>Frac(Y/400)=0=>29->J
1->N
Lbl 5
N+P-1->O
Int ((O-1)/7)+2->E
O-(E-2)*7->D
8-E->E:Prog F
Int (N/10)->C
C<>0=>Prog G
C=0=>A+4->A
Frac (N/10)*10->C
Prog G
Isz N
N<=J=>Goto 5

@@ Prog 7 ( )

C=1=>Goto 1
C=2=>Goto 2
C=3=>Goto 2
C=4=>Goto 4
C=5=>Goto 5
C=6=>Goto 6
C=7=>Goto 7
Goto 0
Lbl 1
Plot A,B
Plot A,B-4:Line
Plot A+2,B-4:Line
Goto 0
Lbl 2
Plot A,B-4
Plot A,B:Line
Plot A+1,B-2:Line
Plot A+2,B:Line
Plot A+2,B-4:Line
Goto 0
Lbl 4
Plot A,B
Plot A+2,B:Line
Plot A+1,B
Plot A+1,B-4:Line
Plot A,B-3:Line
Goto 0
Lbl 5
Plot A,B
Plot A+1,B-4:Line
Plot A+2,B:Line
Goto 0
Lbl 6
Plot A+2,B
Plot A,B-1:Line
Plot A+2,B-3:Line
Plot A,B-4:Line
Goto 0
Lbl 7
Plot A,B
Plot A,B-4:Line
Plot A+1,B-4:Line
Plot A+2,B-3:Line
Plot A+2,B-1:Line
Plot A+1,B:line
Plot A,B:Line
Lbl 0
A+4->A

@@ Prog F ( )

# commun avec demineur

(D-1)*10+8->A
E*8+5->B

@@ Prog G ( )

# commun avec demineur

C=1=>Goto 1
C=2=>Goto 2
C=3=>Goto 3
C=4=>Goto 4
C=5=>Goto 5
C=6=>Goto 6
C=7=>Goto 7
C=8=>Goto 8
C=9=>Goto 9
Plot A,B
Plot A+2,B:Line
Plot X,B-4:Line
Plot A,Y:Line
Plot A,B:Line
Goto 0
Lbl 1
Plot A,B-1
Plot A+1,B
Plot X,B-4
Line
Goto 0
Lbl 2
Plot A,B
Plot A+2,B:Line
Plot X,B-2:Line
Plot A,Y:Line
Plot A,B-4:Line
Plot A+2,Y:Line
Goto 0
Lbl 3
Plot A,B
Plot A+2,B:Line
Plot X,B-4:Line
Plot A,Y:Line
Plot A,B-2
Plot A+1,Y:Line
Goto 0		
Lbl 4
Plot A,B
Plot A,B-2:Line
Plot A+2,Y:Line
Plot X,B:Line
Plot X,B-4:Line
Goto 0
Lbl 5
Plot A+2,B
Plot A,B:Line
Plot A,B-2:Line
Plot A+2,Y:Line
Plot X,B-4:Line
Plot A,Y:Line
Goto 0
Lbl 6
Plot A+2,B
Plot A,B:Line
Plot A,B-4:Line
Plot A+2,Y:Line
Plot X,B-2:Line
Plot A+1,Y
Goto 0
Lbl 7
Plot A,B-1
Plot A,B
Plot A+2,B:Line
Plot X,B-2:Line
Plot A+1,B-3
Plot X,B-4
Goto 0
Lbl 8
Plot A,B
Plot A+2,B:Line
Plot X,B-4:Line
Plot A,Y:Line
Plot A,B:Line
Plot A+1,B-2:Line
Plot A+1,B-2
Goto 0
Lbl 9
Plot A+1,B-2
Plot A,Y
Plot A,B:Line
Plot A+2,B:Line
Plot X,B-4:Line
Plot A,Y:Line
Lbl 0
A+4->A
       </textarea>

        <button onclick="loadProg(0);">Hello World !</button>  
        <button onclick="loadProg(1);">5,4,3,...</button>  
        <button onclick="loadProg(2);">Screen saver</button>  
        <button onclick="loadProg(3);">Random dots</button>  
        <br>
        <button onclick="loadProg(4);">Maze generator</button>
        <button onclick="loadProg(5);">Random num</button>
        <button onclick="loadProg(6);">IMC</button>
        <button onclick="loadProg(7);">Calendrier</button>  <br><br>
        <button onclick="executeCode();">Execute !</button>
        <button onclick="stopCodeExecution()">STOP !</button>  <br><br>
      </div>
    </div>
    <script type="text/javascript">

      function loadProg(progNumber) {
        stopCodeExecution();
        var srcCode = document.getElementById("srcCode"+progNumber).value;
        document.getElementById("srcCode").value = srcCode;
        executeCode();
      }

      function executeCode() {
        var srcCode = document.getElementById("srcCode").value;
        document.getElementById("srcCode").disabled = true;
        if (idTimerMain == 0) {
          jsccRun(srcCode);
        }
      }

      function stopCodeExecution() {
        finish("SIG_STOP received !");
      }

      var casioScreenW = 127;
      var casioScreenH = 63;

      var c1 = document.getElementById("canvas1");
      var c2 = document.getElementById("canvas2");

      var ctx1=c1.getContext("2d");
      var ctx2=c2.getContext("2d");

      var c=c1;
      var ctx=ctx1;

      /* Test */
      if (window.addEventListener){
        window.addEventListener("keypress", calcHandleOnKeyPress, false);
        window.addEventListener("keydown", calcHandleOnKeyDown, false);  
      } else if (window.attachEvent){ // IE sucks !
        window.attachEvent("keypress", calcHandleOnKeyPress, false);
        window.attachEvent("keydown", calcHandleOnKeyDown, false);
      }
      

      var zoomW = c.width  / casioScreenW;
      var zoomH = c.height / casioScreenH;
      console.log("zoomW = "+zoomW+" zoomH = "+zoomH);

      function prepareDisplay(ctx) {
        // No anti-aliasing
        ctx.imageSmoothingEnabled = false
        ctx.webkitImageSmoothingEnabled = false
        ctx.mozImageSmoothingEnabled = false
   
        ctx.scale(zoomW,zoomH); // Apply zoom
        ctx.translate(-1,-1); // Translate so coords starts from (1,1) and go to (127,63);
      }

      prepareDisplay(ctx1);
      prepareDisplay(ctx2);

      // Efface ecran texte 
      clrtext();

      // Efface ecran graphique
      cls();
      

      loadProg(0);
      //executeCode();
    </script>
    <div style="text-align: right">
      <a href="https://twitter.com/Krevo_" class="twitter-follow-button" data-show-count="false">Follow @Krevo_</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    </div>

  </body>
</html>
